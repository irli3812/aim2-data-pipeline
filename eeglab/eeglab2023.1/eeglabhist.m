% EEGLAB history file generated on the 07-Dec-2023
% ------------------------------------------------
[ALLEEG EEG CURRENTSET ALLCOM] = eeglab;
EEG = pop_easy('Locations\Enobio32.locs');
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 0,'gui','off'); 
EEG = eeg_checkset( EEG );
EEG = pop_loadxdf('C:\Users\bonar\MATLAB Drive\eeglab\eeglab2021.1_old\Pilot Data Luca\sub-P001_ses-S002_task-Default_run-001_eeg.xdf' , 'streamtype', 'EEG', 'exclude_markerstreams', {});
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 1,'setname','luca_xdf_nofilt','gui','off'); 
[ALLEEG EEG CURRENTSET] = eeg_store(ALLEEG, EEG, CURRENTSET);
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 2,'retrieve',2,'study',0); 
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 2,'retrieve',1,'study',0); 
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 1,'retrieve',2,'study',0); 
EEG = pop_loadxdf('C:\Users\bonar\MATLAB Drive\eeglab\eeglab2021.1_old\Pilot Data Luca\sub-P001_ses-S002_task-Default_run-001_eeg.xdf' , 'streamtype', 'EEG', 'exclude_markerstreams', {});
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 2,'setname','luca_xdf_nofilt','gui','off'); 
EEG = eeg_checkset( EEG );
EEG = pop_select( EEG, 'channel',[1:9 12 13:17] );
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 3,'gui','off'); 
EEG = eeg_checkset( EEG );
EEG = pop_select( EEG, 'channel',[1:8 10 11:15] );
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 4,'gui','off'); 
EEG = eeg_checkset( EEG );
EEG=pop_chanedit(EEG, 'lookup','C:\\Users\\bonar\\MATLAB Drive\\eeglab\\eeglab2021.1_old\\plugins\\dipfit\\standard_BEM\\elec\\standard_1005.elc','load',{'C:\\Users\\bonar\\MATLAB Drive\\eeglab\\EasyLoc','filetype','loc'});
[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);
EEG = eeg_checkset( EEG );
EEG = pop_select( EEG, 'time',[26 86] );
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 5,'setname','luca_xdf_nofilt_0back','gui','off'); 
EEG = pop_eegfiltnew(EEG, 'locutoff',1,'hicutoff',40,'plotfreqz',1);
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 6,'setname','luca_xdf_filt_0back','gui','off'); 
EEG = eeg_checkset( EEG );
EEG = pop_clean_rawdata(EEG, 'FlatlineCriterion',5,'ChannelCriterion',0.8,'LineNoiseCriterion',4,'Highpass','off','BurstCriterion',20,'WindowCriterion',0.25,'BurstRejection','on','Distance','Euclidian','WindowCriterionTolerances',[-Inf 7] );
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 7,'setname','luca_xdf_filt_0back_clean','gui','off'); 
EEG = eeg_checkset( EEG );
pop_eegplot( EEG, 1, 1, 1);
EEG = eeg_checkset( EEG );
EEG = pop_runica(EEG, 'icatype', 'runica', 'extended',1,'interrupt','on');
[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);
EEG = eeg_checkset( EEG );
EEG = pop_iclabel(EEG, 'default');
[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);
EEG = eeg_checkset( EEG );
EEG = pop_icflag(EEG, [NaN NaN;0.9 1;0.9 1;NaN NaN;NaN NaN;NaN NaN;0.3 1]);
[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);
EEG = eeg_checkset( EEG );
EEG = pop_icflag(EEG, [NaN NaN;0.9 1;0.9 1;NaN NaN;NaN NaN;NaN NaN;0.3 1]);
[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);
EEG = eeg_checkset( EEG );
EEG = pop_subcomp( EEG, [        1111134567890123], 0);
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 8,'gui','off'); 
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 9,'retrieve',5,'study',0); 
EEG = eeg_checkset( EEG );
EEG = pop_select( EEG, 'time',[112 172] );
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 5,'setname','luca_xdf_nofilt_1back','gui','off'); 
EEG = pop_eegfiltnew(EEG, 'locutoff',1,'hicutoff',40,'plotfreqz',1);
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 10,'setname','luca_xdf_filt_1back','gui','off'); 
EEG = eeg_checkset( EEG );
EEG = pop_runica(EEG, 'icatype', 'runica', 'extended',1,'interrupt','on');
[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);
EEG = eeg_checkset( EEG );
EEG = pop_iclabel(EEG, 'default');
[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);
EEG = eeg_checkset( EEG );
EEG = pop_icflag(EEG, [NaN NaN;0.9 1;0.9 1;NaN NaN;NaN NaN;NaN NaN;0.3 1]);
[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);
EEG = eeg_checkset( EEG );
EEG = pop_subcomp( EEG, [        111111245678901234], 0);
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 11,'gui','off'); 
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 12,'retrieve',5,'study',0); 
EEG = eeg_checkset( EEG );
EEG = pop_select( EEG, 'time',[196 256] );
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 5,'setname','luca_xdf_nofilt_2back','gui','off'); 
EEG = pop_eegfiltnew(EEG, 'locutoff',1,'hicutoff',40,'plotfreqz',1);
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 13,'setname','luca_xdf_filt_2back','gui','off'); 
EEG = eeg_checkset( EEG );
EEG = pop_runica(EEG, 'icatype', 'runica', 'extended',1,'interrupt','on');
[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);
EEG = eeg_checkset( EEG );
EEG = pop_iclabel(EEG, 'default');
[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);
EEG = eeg_checkset( EEG );
EEG = pop_icflag(EEG, [NaN NaN;0.9 1;0.9 1;NaN NaN;NaN NaN;NaN NaN;0.3 1]);
[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);
EEG = eeg_checkset( EEG );
EEG = pop_subcomp( EEG, [      11111346791234], 0);
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 14,'gui','off'); 
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 15,'retrieve',9,'study',0); 
EEG = eeg_checkset( EEG );
figure; pop_spectopo(EEG, 1, [0      50788.3071], 'EEG' , 'freq', [3 6 11 20 30], 'freqrange',[1 35],'electrodes','off');
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 9,'retrieve',12,'study',0); 
EEG = eeg_checkset( EEG );
figure; pop_spectopo(EEG, 1, [0  60000], 'EEG' , 'freq', [3 6 11 20 30], 'freqrange',[1 35],'electrodes','off');
[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 12,'retrieve',15,'study',0); 
EEG = eeg_checkset( EEG );
figure; pop_spectopo(EEG, 1, [0  60000], 'EEG' , 'freq', [3 6 11 20 30], 'freqrange',[1 35],'electrodes','off');
EEG = eeg_checkset( EEG );
EEG = pop_saveset( EEG, 'filename','nback_analysis.set','filepath','C:\\Users\\bonar\\MATLAB Drive\\eeglab\\eeglab2021.1_old\\');
[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);
eeglab redraw;
